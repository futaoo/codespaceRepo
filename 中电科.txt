
中电科知识图谱项目
技术文档
 

 
目录
第一章 实体识别	5
1.1. 实体识别背景介绍	5
1.2. 实体识别数据规范	5
1.2.1. 实体类型定义	5
1.2.2. 实体识别标注规范	8
1.2.2.1. 各类型标注细则	8
1.3. 实体识别系统架构	8
1.4. 实体识别各模块技术方案	9
1.4.1. 特征抽取	9
1.4.2. 实体抽取	9
1.4.2.1. 实体识别模型抽取	9
1) 条件随机场（CRF）	10
2) 双向长短期记忆网络（Bi-LSTM）	11
1.4.2.2. 规则抽取	15
1) 正则识别	15
2) 词表识别	15
1.4.3. 实体过滤	15
第二章 关系抽取	16
2.1. 关系抽取背景介绍	16
2.2. 关系抽取数据规范	16
2.2.1. 关系类型定义	16
2.2.2. 关系schema	17
2.2.3. 关系标注规范	19
2.2.3.1. 关系标注总规范	19
2.2.3.2. 各关系标注规范	20
2.3. 关系抽取系统架构	21
2.4. 关系抽取各模块技术方案	22
2.4.1. 文本处理	22
2.4.2. 选取实体对	23
2.4.3. 关系抽取	23
2.4.3.1. 知识库抽取	23
2.4.3.2. 模板抽取	23
2.4.3.3. 关系分类模型	24
1) 嵌入层	24
2) 编码层	26
3) 分类层	26
2.4.4. 三元组过滤	26
2.4.4.1. schema过滤	26
2.4.4.2. 距离过滤	27
2.4.4.3. 分句过滤	27
第三章 属性抽取	28
3.1. 属性抽取背景介绍	28
3.2. 属性抽取数据规范	28
3.2.1. 属性schema	28
3.2.2. 属性标注规范	30
3.3. 属性抽取系统架构	30
3.4. 属性抽取各模块技术方案	31
3.4.1. 文本处理	32
3.4.2. 选取实体对	32
3.4.3. 属性抽取	32
3.4.3.1. 模板抽取	32
3.4.3.2. 模型分类	32
3.4.4. 三元组过滤	33
3.4.4.1. schema过滤	33
3.4.4.2. 距离过滤	33
3.4.4.3. 分句过滤	33
第四章 事件抽取	34
4.1. 事件抽取背景介绍	34
4.2. 事件抽取数据规范	34
4.2.1. 事件元素定义	34
4.2.2. 事件标注规范	35
4.2.2.1. 标注举例	35
4.3. 事件抽取系统架构	36
4.4. 事件抽取技术方案	37
4.4.1. 模型抽取	37
4.4.1.1. 特征抽取	37
4.4.1.2. 事件抽取模型	38
4.4.1.3. BERT序列标注模型	38
4.4.1.4. Argument-Span模型	38
4.4.2. 事件论元补充	39
4.4.2.1. 时间抽取	39
4.4.2.2. 地点抽取	39
4.4.2.3. 主体数量和客体数量抽取	39
4.4.3. 事件过滤	39
4.4.3.1. 关键词过滤	39
4.4.3.2. 分类模型过滤	40

实体识别
实体识别背景介绍
实体识别是自然语言处理领域的基础任务之一，也是知识图谱构建和信息抽取任务中一个重要的子任务。实体识别意在识别文本中事物的名称，例如人名、地名、机构名、时间和武器装备等。本系统主要为基于领域模型的实体识别系统，主要依赖于三个服务接口，分别是分词服务、词性服务、词向量服务。利用针对用户需求训练的模型对用户输入的文本中识别出多种类别的实体，对于模型无法识别的实体，借助规则和词表进行补充。
实体识别数据规范
数据是人工智能算法研发的重要基础。实体识别数据相关的规范主要包括实体类型定义和实体标注规范。以下为各部分的详细介绍。
实体类型定义
中文名	英文名	定义
时间	time	时间在一维的时间坐标轴上有相对确定的位置。
地点	loc	地名
组织机构	org	机构名包括：股票（证券）交易所、国家或国际组织、商业团体（公司、企业、工厂）、电视台、广播电台、报刊杂志、出版社、政党或党派、学校、科研院所、医院、诊所、邮电局、乐队、体育运动队、联盟、咖啡厅、酒吧、饭店、旅馆，以及虚构的机构等。
人名	per	人名一般包含‘姓’和‘名’两部分，‘姓’是表明家族的字，有单姓和复姓之别；‘名’也就是名字，是一种称号，由一个或几个字组成，跟‘姓’合在一起，用来代表一个人
军事组织机构	military_org	军事机构指的是用于设计、生产、制造武器装备的生产研发公司或机构，以及从事军队人事、装备、行动和关系的组织和机构。
国家	country	国家为具体国家名称或简称，如中国，法，美国，苏联，俄
飞行器	aircraft	如F-22、苏-27、米格-25战斗机等。需包含带有具体型号
舰船舰艇	warship	朱姆沃尔特级驱逐舰、库兹涅佐夫号航母、皇家方舟号航空母舰等。需包含带有具体型号。
枪械与单兵	guns	如AK-47、56式半自动步枪、85式狙击步枪、54式手枪（注意，单兵携带的个人装备也属于该条目，如防毒面具等）等。需包含带有具体型号。
坦克装甲车辆	tank	如T-62主战坦克、MBT-2000主战坦克、BMP-1步兵战车、AAAV先进两栖突击车等。需包含带有具体型号。
火炮	artillery	203毫米榴弹炮、122毫米自行榴弹炮、FH77A式155毫米榴弹炮35毫米双管自行高射炮、“博菲”40毫米高射炮等。需包含带有具体型号。
导弹武器	missile	导弹（简称missile）是本身配有制导能力且同时可以在大气层或是太空中进行有动力飞行的弹药。有制导能力但没有飞行动力的弹药称作制导炸弹（guided bomb），有飞行动力但是没有诱导能力的弹药称作火箭弹（rocket munition）。
太空装备	spaceship	常见的太空装备有运载火箭,卫星,空间探测器,航天飞机,宇宙飞船等装备
爆炸物	explosive	如GBU-28、炸弹之母、74号反坦克手榴弹、反-43式反坦克手榴弹等。需包含带有具体型号。
雷达	radar	如AN/FPS-115相控阵雷达、ARS-880海上巡逻与监视雷达等。需包含带有具体型号。
部队	force	如中国人民解放军、第35集团军等。
战区	warzone	如东部战区、太平洋战区等。
基地	base	丘古耶夫卡海军基地、中国商飞东营试飞基地、乌汶陆军基地等。一般具体的基地，而不是泛指。请参考细则。
机场	airport	如南苑机场等。
港口	port	如上海军港、东京港、仁川港口等。
海峡	strait	如丹麦海峡、马六甲海峡、台湾海峡等。
岛屿	island	（岛屿、岛礁、滩涂等）如丹麦海峡、马六甲海峡、台湾海峡等。
水域	waterarea	（江、河、湖、海、水域、海域等）：如亚丁湾海域、亚马逊河、吉兰泰盐湖等。
发动机	engine	（发动机、引擎等）：如6V-53T柴油引擎、8V-92TA水冷式柴油发动机等。需包含带有具体型号。
战争	war	（战争、战役、战斗）：如918事变、中途岛海战、抗美援朝、伊拉克战争等。
巡飞弹	loitering_munition	巡飞弹是一种介于巡航导弹和无人机之间的智能导弹武器，这种导弹可以在目标区域巡逻飞行一段时间以搜索目标，并在定位目标后进行攻击。
职位	job	职位名，如老师，主任，主席等
发射系统	launch_system	包括各种发射系统，常见的类型有舰载导弹发射系统，火箭发射系统等，需包含带有具体型号。如MK41发射系统
飞行器类型词	aircraft_type	如侦察直升机、俯冲轰炸机等
舰船舰艇类型词	warship_type	如中型航母、反潜护卫舰等。
枪械类型词	guns_type	如冲锋手枪、反坦克步枪等。
坦克类型词	tank_type	如两栖侦察坦克、伞兵突击车等。
火炮类型词	artillery_type	如加农榴弹炮、双管自行高炮等。
导弹类型词	missile_type	如洲际导弹、便携式地空导弹等。
太空装备类型词	spaceship_type	如中继卫星、卫星运载火箭等
爆炸物类型词	explosive_type	如催泪手榴弹、原子弹、反坦克地雷、核弹头、常规弹头等
雷达类型词	radar_type	如侦察机前视雷达、先进合成孔径雷达、前视机载搜索雷达等
巡飞弹类型词	loitering_munition_type	如巡飞弹

实体识别标注规范
各类型标注细则
类型	标注规则
time		含有地名的时间要整体标为时间: 格林威治时间8点12分
	模糊时间不进行标注：现在、当日、最近等
org		括号内的机构简称要单独标注：中国工商银行（ICBC）
country	1.两个国家简称在一起时需要将它们分开标注：中美
aircraft	1.第几代算形容词，与飞行器一起标注：第五代隐形战斗机歼-31
2.新一代、本土、新型词、生产型、中高端不算形容词：新一代隐形战斗机歼-31
base	1.军队和基地组合起来的时候要一起标注：阿联酋空军基地
engine	1.Pratt&Whitney F119-PW-100涡轮风扇发动机

实体识别系统架构
实体识别系统基于流水线架构，主要分为特征抽取、实体抽取、实体过滤模块。实体识别系统架构图如下所示：
 
实体识别各模块技术方案
特征抽取
特征抽取主要是指在进行实体识别之前，需要使用一些NLP基础模块（分词、词性等）来获得文本的分词，词性。
实体抽取
实体识别模型抽取
实体识别使用针对任务的特征提取方法，对句子中每一个词的相应窗口信息利用特征模板进行特征抽取。然后使用双向LSTM对句子中的词序列的每个位置，预测出各个标签的隐状态表示，通过CRF模型计算出每个位置的标签概率分部，使用维特比算法解码出最可能的序列标注结果，并解码出最终的军事实体序列。这里使用的模型增加了CRF层，在此类标签有强烈的依赖关系的任务中，通过CRF算法的结合可以较大的提高整体模块的准确率。解码器示意图如下：
 
图	解码器示意图
条件随机场（CRF）
设X与Y是随机变量，P(Y|X)是在给定X的条件下Y的条件概率分布。若随机变量Y构成一个由无向图G=(V,E)表示的马尔科夫随机场，即
P(Y_v│X,Y_w,w≠v)=P(Y_v |X,Y_w,w~v)
对任意节点v成立，则条件概率分布P(Y|X)为条件随机场。式中w~v表示在图G=(V,E)中与节点v有边连接的所有节点w，w≠v表示节点v以外的所有结点，Yv，Yu与Yw为结点v，u与w对应的随机变量。
在定义中并没有要求X和Y具有相同的结构。现实中，我们一般假设X和Y有相同的图结构。这里我们主要考虑无向图如所示的线性链的情况，即
G=(V={1,2,…,n},   E={(i,i+1)}),   i=1,2,…,n-1
在这种情况下，X=(X1,X2,…,Xn),Y=(Y1,Y2,…，Yn),最大团是相邻两个节点的集合。线性链条件随机场的定义如下。
 
图	线性链条件随机场
 
图	X和Y有相同的图结构的线性链条件随机场
定义：线性链条件随机场，设X=(X1,X2,…,Xn),Y=(Y1,Y2,…,Yn)均为线性链表示的随机变量序列，若在给定随机变量序列X的条件下，随机变量序列Y的条件概率分布P(Y|X)构成条件随机场，即满足马尔科夫性
P(Y_i |X,Y_1,…,Y_(i-1),Y_(i+1),…,Y_n)≈P(Y_i |X,Y_(i-1),Y_(i+1))	i=1,2,…,n (在i=1和n时只考虑单边)
则称P(Y|X)为线性链条件随机场。在标注问题中，X表示输入观测序列，Y表示对应的输出标记序列或状态序列。
线性链条件随机场的参数化形式: 设P(Y|X)为线性链条件随机场，则在随机变量X取值为x的条件下，随机变量Y取值为y的条件概率具有如下形式：
P(y│x)=1/(Z(x)) exp(∑_(i,k)▒〖λ_k t_k (y_(i-1),y_i,x,i)+∑_(i,j)▒〖μ_l s_l (y_i,x,i)〗〗)（1.1）
其中，
Z(x)=∑_y▒exp(∑_(i,k)▒〖λ_k t_k (y_(i-1),y_i,x,i)+∑_(i,j)▒〖μ_l s_l (y_i,x,i)〗〗) （1.2）
式中，t_k和s_l是特征函数，λ_k和μ_l是对应的权值。Z(x)是规范化因子，求和是在所有可能的输出序列上进行的。
式（1.1）和式（1.2）是线性链条件随机场模型的基本形式，表示给定输入序列x，对输入序列y预测的条件概率。t_k是定义在边上的特征函数，称为转移特征，依赖于当前和前一个位置，t_k是定义在边上的特征函数，称为转移特征，依赖于当前和前一个位置，s_l是定义在结点上的特征函数，称为状态特征，依赖于当前位置。t_k和s_l都依赖于位置，是局部特征函数。通常，特征函数t_k和s_l取值为1或0；当满足特征条件时取值为1，否则为0.条件随机场完全由特征函数t_k，s_l和对应的权值λ_k，μ_l确定。
双向长短期记忆网络（Bi-LSTM）
近年来，深度学习已经被广泛的应用于自然语言处理的很多领域上。这种方法的使用将人们从特征工程的工作中解放出来，同时，如LSTM、GRU等深度循环神经网络也能够更加科学的在句子上进行计算，解决句子中长依赖的问题。在很多自然语言处理的问题中，深度学习已经表现出其强大的优势。
循环神经网络（RNN，Recurrent Neural Network）是一种带回馈机制的神经网络模型，这就使其能够描述时序和序列预测上的相关问题。1986年Jordan首先提出在神经网络中引入输出层到输入层的回馈链接，以获取时序上的动态记忆，Elman对此结构进行了修改，将反馈机制放到了模型内部，改为由隐含层到输入层加入反馈，这样一来，下一时刻神经网络就能够看到上一时刻隐含层的信息，从而达到时序上的记忆效果。Elman结构的是目前较为常用的RNN，其基本模型如下图所示。
 
图	循环神经网络结构
对于输入序列S=(s_1,s_2,s_3…s_t)，RNN按照时序依次处理每个时刻的输入（本文的时刻也指词或句子的上下文顺序），同时将隐含层的输出作为下一时刻的输入，如下公式所示，t时刻隐含层的输出h_t，由当前输入x_t和t-1时刻的隐含层输出h_(t-1)经过线性组合后经过一个非线性变换计算得出,其中f是隐含层非线性函数，一般使用tanh或sigmoid函数。
h_t=f(Wh_(t-1)+Vx_t+b)
理论上，RNN有能力组合输入s_t与所有的历史信息，输出s_t的特征表示。
由于语言处理问题往往涉及到句子或篇章序列问题的数据中序列长度有差距，而且往往一个位置的输出，依赖于其之前和之后位置的信息，这正好是RNN能够描述的内容。在RNN提出时，人们成功的将其应用于多种自然语言处理任务中，但开始由于计算能力有限，RNN没有引起广泛重视。而且开始提出的Elman的RNN还存在两个比较严重的两个问题。一是长距离依赖问题，在长距离序列中，某位置的输出可能依赖于之前较远位置的输入，RNN在捕捉这种特征的效果并不是很好。二是梯度消失和梯度爆炸，在模型训练的过程中，由于模型输出对于较远的依赖相距的层数较多，在梯度回传的过程中有可能会导致梯度很小或很大，这种问题在处理长序列的时候尤为明显。一个简单的解决方法是截断梯度的传播，限制反向传播的步数。但这又会导致第一个长距离依赖的问题。
为了解决以上问题，人们提出了长短时记忆RNN模型（Long-Short term memory RNN，LSTM）模型。这种RNN架构专门用于解决RNN模型的梯度消失和梯度爆炸问题。隐藏的神经元由多个记忆单元（memory block）实现，由三个乘法门控制记忆单元的激活状态：输入门（input gate）、输出门（output gate）、忘记门（forget gate）。
下面的公式具体描述了在时刻t隐层状态h_t的更新方式：
i_t=σ(U_i h_(t-1)+V_i x_t+C_i c_(t-1)+b_i )
f_t=σ(U_f h_(t-1)+V_f x_t+C_f c_(t-1)+b_f )
c_t=i_t⨀g(U_c h_(t-1)+V_c x_t+b_c )+f_t⨀c_(t-1)
o_t=σ(U_o h_(t-1)+V_o x_t+C_o c_(t-1)+b_o )
h_t=o_t⨀h(c_t)
其中，i、f、o、c分别表示输入门、忘记门、输出门、记忆单元，U_k  (k=i,f,c,o)表示隐含层对各个乘法门（或记忆单元）的权重，V_k  (k=i,f,c,o)表示当前输入x_t对各个乘法门（或记忆单元）的权重，C_k  (k=i,f,o)表示历史记忆单元c_(t-1)对各个乘法门的权重，b_k  (k=i,f,c,o)是相关的偏置向量。⨀是海德玛德乘积，即两个向量之间逐项的乘积。公式中给出了它们在t时刻的计算方式，公式中σ表示所使用的激活函数，通常采用tanh或sigmoid函数。通常使用误差反向传播（Back propagation，简称BP）对LSTM进行训练。

 
图	LSTM记忆块单元

这种结构可以使之前输入的信息保存在网络中，并一直向前传递，输入门打开时新的输入才会改变网络中保存的历史状态，输出门打开时保存的历史状态会被访问到，并影响之后的输出，忘记门用于清空之前保存的部分历史信息。这也使得RNN中的信息流能够有效地进行长距离传递，从而解决长距离依赖的问题。LSTM模型的结构决定了该模型有能力处理以上描述的RNN存在的两个问题。现在已经被广泛使用在各种序列问题之中。
由于LSTM的输入是单方向的，往往忽略了未来的上下文信息。双向长短时记忆RNN（Bi-Direction LSTM RNN，Bi-LSTM）的基本思想是使用一个训练序列，正序倒序各训练一个LSTM模型。再将两个LSTM模型对应位置上的的输出进行线性组合，以达到序列中每一个节点都能够完整的依赖所有上下文信息的目的。
 
图	Bi-Directional LSTM-RNN
规则抽取
规则抽取的作用主要是用来补充模型未识别的和识别一些明确的或则规律性强的实体，主要使用正则和词表进行识别补充。
正则识别
正则识别主要用来识别一系列规律性较强的词。如时间类型、型号格式统一的武器等等。
例如：米格系列战斗机的表达式为“米格\-\d{2}战斗机”。
例如：年月日格式的时间表达式为“\d{4}年\d{1,2}月\d{1,2}日”。
词表识别
词表识别通过预先收集的各类型的实体词表，使用这些词表构建ac自动机，使用ac自动机对识别文本的快速检索识别。
实体过滤
实体过滤主要用来移除一些有歧义的词和用户定义的一些停用词。
具体的实现使用过滤词表构建ac自动机，使用ac自动机对识别文本的快速检索识别，过滤掉识别出的内容。
例如：“连云港”这个词因为与其他港口词有相同的分词和词性特征，很有可能被模型识别为港口类型。我们在港口类型的停用词表里增加这个词，然后使用ac自动机识别取消识别的内容，这样可以确保其不会被错误的识别。

关系抽取
关系抽取背景介绍
关系抽取是知识图谱构建和信息抽取中的一个关键环节，主要目的是从非结构化或半结构化的文本中自动抽取出实体对之间的语义关系。关系抽取具有重要的理论意义和广阔的应用前景，为多种应用提供重要的支持，包括大规模知识图谱的自动构建，对信息检索和问答系统提供支持等。随着近年来知识图谱、信息抽取需求的兴起，实体关系抽取问题进一步得到广泛关注和深入研究。
关系定义为两个或多个实体之间的某种联系。关系抽取的输出通常是一个三元组(实体 1，关系，实体 2)。例如，句子“北京是中国的首都、政治中心和文化中心”中表述的关系可以表示为（中国，首都，北京），（中国，政治中心，北京）和（中国，文化中心，北京）。
关系抽取数据规范
数据是人工智能算法研发的重要基础。关系抽取数据相关的规范主要包括关系类型定义、关系schema和关系标注规范。以下为各部分的详细介绍。
关系类型定义
英文名	中文名	定义
use	使用	表明武器与国家、地点（如台湾）之间的使用关系
produce	生产设计	表明国家和军事机构与武器之间的生产和设计关系
belong	从属	表示依存、附属。在层次结构中，下层概念形成了上层概念的组成部分。从属通常出现在两个组织中出现或军队与组织之间出现。
from	衍生自	表示A实体的研发概念是来自于B实体
equip 	武器装备	表名某个载具会搭载或携带另一个武器装备
operator	服役	表示部队和武器之间的使用关系
propulsion	动力装置	表示某个武器的发动机
radar	航电系统	表示某个武器的雷达
locate	位于	表示两个地点（包括国家）之间的位置关系
work	任职于	表示某个人的工作单位或地点
position	职位	表示某个人的职位
contain	属于	表示某个武器的类型

关系schema
关系名	头实体类型	尾实体类型
use	国家	飞行器、火炮、爆炸物、枪支、巡飞弹、导弹、雷达、舰艇船只、坦克、太空装备、发动机
	地点	飞行器、火炮、爆炸物、枪支、巡飞弹、导弹、雷达、舰艇船只、坦克、太空装备、发动机
produce	国家	飞行器、火炮、爆炸物、枪支、巡飞弹、导弹、雷达、舰艇船只、坦克、太空装备、发动机
	军事机构	飞行器、火炮、爆炸物、枪支、巡飞弹、导弹、雷达、舰艇船只、坦克、太空装备、发动机
belong	军队	国家、军队、军事机构、地点、水域、战区、基地、机场、港口、岛屿、海峡
	军事机构	国家、军事机构、地点，基地、机场、港口、岛屿、海峡、机构
	机构	国家、机构、军事机构、地点、基地、机场
	媒体	国家、地点、军事机构
from	飞行器	飞行器
	火炮	火炮
	爆炸物	爆炸物
	枪支	枪支
	巡飞弹	巡飞弹，导弹，飞行器
	导弹	导弹
	雷达	雷达
	太空装备	太空装备
	坦克	坦克
	舰艇船只	舰艇船只
	发动机	发动机
equip	飞行器	火炮、爆炸物、导弹
	巡飞弹	爆炸物、火炮
	坦克	火炮、枪支、爆炸物、导弹
	舰艇船只	导弹、爆炸物、火炮、巡飞弹、飞行器、枪支
operator	飞行器	军队
	火炮	
	爆炸物	
	枪支	
	巡飞弹	
	导弹	
	雷达	
	舰艇船只	
	坦克	
	太空装备	
propulsion	导弹	发动机
	飞行器	
	舰艇船只	
	太空装备	
	巡飞弹	
	坦克	
radar	导弹	雷达
	巡飞弹	
	飞行器	
	舰艇船只	
	坦克	
	太空装备	
locate	水域	地点、水域、国家
	国家	地点、水域、战区、岛屿、海峡
	战区	地点、国家
	基地	地点、水域、机场、港口、岛屿、海峡、国家
	机场	地点、战区、基地、岛屿、国家
	港口	地点、水域、战区、基地、岛屿、海峡、国家
	岛屿	地点、水域、战区、海峡、国家
	海峡	地点、水域、国家
	地点	地点、水域、战区、基地、机场、港口、岛屿、海峡、国家
work	人名	国家、机构、军事机构、军队、地点
position	人名	职位
contain	坦克	坦克类型
	火炮	火炮类型
	导弹	导弹类型
	爆炸物	爆炸物类型
	雷达	雷达类型
	飞行器	飞行器类型
	太空装备	太空装备类型
	舰艇船只	舰艇船只类型
	坦克	坦克类型
	巡飞弹	巡飞弹类型

关系标注规范
关系标注总规范
	当不同名称表示同一实体时，标注关系或属性需要选择距离属性或关系名近的实体，比如“属于战机强国的俄罗斯研发的苏-57战机至今也没有服役战队，大多数人都认为苏-57最大的缺点是隐身性能不足”中，标注“苏-57战机”的关系和属性即可。
	不同名称表示同一实体时，这些实体指的就是一件事物，不存在关系。
	当出现机构名的全称与缩写的情况，关系需要使用全称标注。
	不标注需要推理或外部知识的关系，只标注文本中明显体现的关系。
	除了contain关系的head这种特殊的，一般关系的head和tail没有抽象实体。
	指代词不需要标注contain关系。
各关系标注规范
关系名	标注规则
use		出现以下关键词视为使用关系：拥有、购买、使用、保留、发射、运营、装备、服役等
	中国的黑鹰战机或中国黑鹰战机为：使用关系
produce		出现以下关键词视为生产设计关系：研发、设计、制造、研制、承包、出口、原始开发国、下线、打造、出售等
belong	1.出现以下关键词视为生产设计关系：下属的，隶属于，属于等
from	1.出现以下关键词，视为衍生自类型：发展自、衍生自、升级版、前型、基础之上研制、技术立足于、改进等
equip	1.有具体名称的弹头等被搭载物的即可是武器装备
2.某武器的一部分是另一种武器，视为武器装备。
3.某武器存在以下动词，视为武器装备：携带、挂载、试射、安装、搭载、酬载等
operator	1.部队名称与装备之间的使用关系统一标注为服役关系。
propulsion	1.载具的发动机为动力装置关系。
radar	1.导弹、飞行器等载具的雷达标注为航电系统关系。
locate	1.位于关系是表示两个位置实体（包括国家）之间的位置关系
2.出现以下关键词可视为位于：位于等
work	1.表示某个人的工作单位或地点
position	1.表示某个人的职位
contain	必须出现，明显的有属于的意思的字样：例如：包含，包括，xx（武器）等xx（武器类型），xx（武器）是xx（武器类型）

关系抽取系统架构
关系抽取系统基于流水线架构，主要分为特征抽取、候选实体对抽取、三元组抽取和三元组过滤等模块。关系抽取系统架构图如下所示：
 
关系抽取各模块技术方案
关系抽取是指从大量的非结构化的文本中抽取出有用的信息并且将该信息结构化的展示出来。整体系统包括以下部分：
文本处理
文本处理主要是指在进行关系抽取之前，需要使用一些NLP基础模块（分词、实体识别等）来获得文本的分词，词性以及文本中的实体信息。然后再对文本进行分句，特殊词汇的标记等处理。
在拿到处理后的文本特征后，会对句子进行指代消解工作。指代消解工作注要是把句子中一些具有指代意义的词。例如：中国设计了歼-20，中国空军正在使用这款战机。我们便会把这款战机指代为歼-20。同时还会通过句子的一些特征来确定是否需要作出零指代，即句子中并未出现指代词，但是实际上句子的意思中是包含了指代的意思，然后程序会为该句子添加上一个指代后的词语。
选取实体对
关系都是存在于两个实体之间的，同时再我们进行数据的观察后发现，a实体与b实体间存在某种关系的同时a实体也会和b实体的并列实体存在同样的关系。于是我们先进行了并列实体的抽选，并列实体的抽选主要是通过实体的类型，以及一些并列词的模板进行抽取。之后，我们会对实体进行分组，将并列实体放入一个组中，然后进行实体对的选取。
例如：中国生产了歼-10、歼-20、歼11等优秀的飞机。句子中，中国一组实体，歼-10、歼-20、歼-11为一组实体，所以在选取实体对的过程中，生成（中国，歼-10），（中国，歼-20），（中国，歼-11）等实体对。
关系抽取
在进行完实体对的选取之后，我们就会通过实体对以及实体对在文本中的一些信息进行关系抽取，输出候选实体对。关系抽取只要有三种方式：知识库抽取，模板抽取和模型抽取。
知识库抽取
知识库抽取主要是通过我们现有的一些已知三元组进行匹配，若知识库中存在改实体对，则直接返回实体对对应的三元组。
例如：在知识库中存在有中国和歼-20是生产设计关系，则在出现这两个实体时便会返回生产设计关系。
模板抽取
模板抽取主要是通过实体的一些类型，以及实体对在句子中的上下文文本及词性特征写出一些关系模板。然后再通过模板来匹配出输入文本中所有符合该模板的片段，再通过模板中实体的位置来判断实体对是否符合该模板，如果符合，则会输出关系。
例如：如下图所示生产设计的模板：
 
该模板对应的数据应该为某个国家+制+一个飞行器，所有符合此模板的两个实体都会被识别为生产设计关系。如俄制苏-57，美制F-22。
关系分类模型
我们观察语料发现在真实新闻语料中，一个句子中可能存在多个关系，同时一个实体也可能存在于多个关系中，情况较为复杂。而学术届许多模型都只为解决一个句子存在一个关系而设计，并不能直接用于本任务。我们针对真实语料中的多实体多关系的情况，设计了基于深度学习的关系分类模型，主要分为嵌入层、编码层和分类层三层，其模型架构图如下所示：

 

嵌入层
嵌入层负责将输入的原始文本转换为表示其语义的稠密向量。输入文本经过嵌入层后，每个子词都可以得到一个代表其上下文相关语义向量。
嵌入层基于目前综合表现最好的预训练模型BERT。BERT的全称是Bidirectional Encoder Representation from Transformers，即双向Transformer的Encoder。
标准的BERT首先会将输入的文本转换成子词嵌入、位置嵌入和分割嵌入等三个词嵌入特征是，如下图所示：
 

子词嵌入：子词（WordPiece）是指将单词划分成一组有限的公共子词单元，能在单词的有效性和字符的灵活性之间取得一个折中的平衡。例如示例中‘playing’被拆分成了‘play’和‘ing’。在中文中子词一般都是汉字字符；
位置嵌入（Position Embedding）：位置嵌入是指将单词的位置信息编码成特征向量；
分割嵌入（Segment Embedding）：用于区分两个句子，对于句子对，第一个句子的特征值是0，第二个句子的特征值是1。
另外还有两个特殊符号[CLS]和[SEP]，其中[CLS]表示该特征用于分类模型。[SEP]表示分句符号，用于断开输入语料中的两个句子。
形式化的，设 为输入文本切分出的子词序列，其中 ， 。

因为做关系抽取时已经有了实体识别的结果，为了将实体识别的信息加入模型，我们在标准的BERT嵌入的基础上增加了实体标记信息，在实体的token序列的收尾增加实体标记。
 
增加实体标记的子词序列样例如下所示：
 
输入文本经过嵌入层后，每个子词都可以得到一个代表其上下文相关语义向量：
 
编码层
编码层将基于嵌入层输出的每个子词的语义向量，为每个待分类的关系构造代表其语义的向量表示。
实体表示
实体表示向量采用实体包含的子词对应的词向量做最大池化得到。
设实体为子词序列 ，则对应的实体表示向量为:
 。
头实体和尾实体之间的上下文通过它们之间的子词序列的词向量做最大池化得到。
设上下文为子词序列 ，则对应的上下文表示向量为：
 
关系表示
关系表示向量由头实体向量、上下文向量和尾实体向量拼接得到。设头实体、尾实体的表示向量分别为 和 ，则：
 
分类层
每个关系对应的向量表示最后输入到一个全连接层进行多分类，取概率最大的类别作为该关系的类别：
 
三元组过滤
三元组过滤是指将抽取出来的候选的三元组，通过一些规则，过滤掉一些不符合规范的三元组，得到最终输出的三元组。
三元组过滤主要分为三部分schema过滤，实体对之间的距离过滤，分句过滤。
schema过滤
Schema过滤主要是通过对所有的关系对应的实体对都有类型上的约束，不符合schema的三元组都会被过滤掉。
例如：我们抽取了一个三元组（中国-使用-美国），很明显，使用关系的客体应该是一个武器装备，而不会是一个国家，所有这种的三元组都会被过滤掉。
距离过滤
对于距离的过远的实体，抽取来的关系大多数是没有意义或者错误的，所以会针对不同的关系设置不同的实体间距离，若两个实体的距离超过了我们设置的距离则会过滤掉。
例如：军事学者分析，055型开始海试标志着该舰距离服役又近了一步，055型是中国打造蓝水海军的一款利器，服役后将显著增强包括航母编队在内的中国海军的远洋作战能力。在这个句子中，第一个055型与最后的中国海军的距离则非常远，若抽出来三元组，则很有可能是没有意义或者错误的，所以会过滤掉。
分句过滤
对于不在一个句子中的两个实体对，如果存在关系，则会通过指代消解来进行抽取，所以所有跨句的两个实体之间的关系都会被过滤掉。
例如：中国设计了歼-20。美国设计了f-22。中国和美国，中国和f-22的关系则不会抽出。
属性抽取
属性抽取背景介绍
属性抽取是知识图谱构建和信息抽取中的一个关键环节，主要目的是从非结构化或半结构化的文本中自动抽取出实体对应的属性名、属性值。属性抽取具有重要的理论意义和广阔的应用前景，为多种应用提供重要的支持，包括大规模知识图谱的自动构建，对信息检索和问答系统提供支持等。随着近年来知识图谱、信息抽取需求的兴起，实体属性抽取问题进一步得到广泛关注和深入研究。
属性定义为实体对应的属性名、属性值组合。属性抽取的输出通常是一个三元组(实体 ，属性名，属性值)。例如，句子“霹雳-15导弹弹体长度是4米”中表述的关系可以表示为（霹雳-15导弹，弹长，4米）。
属性抽取数据规范
数据是人工智能算法研发的重要基础。属性抽取数据相关的规范主要包括属性schema和属性标注规范。以下为各部分的详细介绍。
属性schema
如下以飞行器、太空装备实体的schema举例
实体	属性名	属性值
飞行器
	长度	长度
	宽度	长度
	巡航速度	速度
	空重	重量
	重量	重量
	巡航半径	长度
	续航能力	长度、时间
	速度	速度
	时速	速度、长度
	最大时速	速度、长度
	高度	长度
	最大起飞重量	重量
	最高飞行高度	长度
	飞行高度	长度
	最大内部燃料容量	重量
	最大内部载荷	重量
	最大航程	长度
	最大速度	速度
	生产数量	数量
	发动机数量	数量
	作战距离	长度
	起飞重量	重量
	翼展	长度
	机翼面积	面积
	载重	重量
	过载	重量
	价格	产值
	使用寿命	时间
	最大作战半径	长度
	最大载弹量	数量
	弹量	数量、弹量
	射程	长度
	最大射程	长度
	最小射程	长度
	搭载人数	数量
太空装备	重量	重量
	长度	长度
	载重	重量
	直径	长度
	高度	长度
	总发射次数	数量
	轨道距离	长度
	起飞重量	重量
	分辨率	长度
	使用寿命	时间

属性标注规范
	数值带有前后缀如”超过”，”约”等词汇需要将其与数值一起标注。
	不同名称表示同一实体时，只需标注离属性值较近的实体即可。
	有前提条件的属性也需要标注。
属性抽取系统架构
属性抽取系统基于流水线架构，主要分为特征抽取、候选实体对抽取、三元组抽取和三元组过滤等模块。属性抽取系统架构图如下所示：
 
属性抽取各模块技术方案
属性抽取是指从大量的非结构化的文本中抽取出有用的信息并且将该信息结构化的展示出来。整体系统包括以下部分：
文本处理
文本处理主要是指在进行属性抽取之前，需要使用一些NLP基础模块（分词、实体识别等）来获得文本的分词，词性以及文本中的实体信息。然后再对文本进行分句，特殊词汇的标记等处理。
在拿到处理后的文本特征后，会对句子进行指代消解工作。指代消解工作主要是把句子中一些具有指代意义的词，例如：它，这些坦克等通过程序指向一个具体的实体。同时还会通过句子的一些特征来确定是否需要作出零指代，即句子中并未出现指代词，但是实际上句子的意思中是包含了指代的意思，然后程序会为该句子添加上一个指代后的词语。
选取实体对
再进行文本处理后，我们会得到带有特征的词列表，在该部分会对词列表进行组合；组合的逻辑为首先对实体与属性值进行全匹配，之后会依据定义好的schema进行过滤。
例如：霹雳-15导弹弹体长度是4米
经过匹配后即会抽取出（霹雳-15导弹，4米）的实体-属性值对。
属性抽取
在进行完实体属性值对的抽取之后，我们就会通过实体属性值对以及上下文进行属性的抽取，属性抽取只要有两种方式：模板抽取和模型抽取。
模板抽取
模板抽取主要是通过实体的一些类型，以及实体属性值对在句子中的上下文文本及词性特征写出一些模板。然后再通过模板来匹配出输入文本中所有符合该模板的片段，再通过模板中实体的位置来判断实体对是否符合该模板，如果符合，则会输出属性。
例如：定义的模板为length：["长达/*", "*/length", "的/*", "*/missile"]
即会抽取出（长达xx米的xx导弹）相同句型的长度属性。
模型分类
模型分类部分主要是通过简易fasttest模型来对属性名进行映射分类；模型的训练语料主要是通过模板以及上下文中出现了一些属性别名来生成训练语料，在通过一些训练语料清洗脚本以及人工验证，对一些错误的训练语料进行清洗。训练的内容目前偏向于上下文中的关键词，以及实体属性值来进行学习。
三元组过滤
三元组过滤是指将抽取出来的候选的三元组，通过一些规则，过滤掉一些不符合规范的三元组，得到最终输出的三元组。
三元组过滤主要分为三部分schema过滤，实体对之间的距离过滤，分句过滤。
schema过滤
Schema过滤主要是通过对所有的属性对应的实体属性值对都有类型上的约束，不符合schema的三元组都会被过滤掉。
例如：霹雳-15导弹弹体长度是4米，重25kg
句子中抽取的三元组为（霹雳-15导弹，长度，4米），（霹雳-15导弹，重量，4米）
而我们定义好的schema为（missile，length，length）
这时就会把（霹雳-15导弹，重量，4米）这条三元组过滤掉，留下了（霹雳-15导弹，长度，4米）符合schema的三元组。
距离过滤
对于距离的过远的属性、属性值之间，抽取来的属性大多数是没有意义或者错误的，所以会针对不同的属性设置不同的实体间距离，若属性、属性值的距离超过了我们设置的距离则会过滤掉。
例如：霹雳-15导弹弹体长度是4米射程为1000千米。
通过距离过滤，我们即可过滤掉（霹雳-15导弹，长度，1000千米）这样跨度较远的三元组而留下（霹雳-15导弹，长度，4米）这样符合预期的三元组。
分句过滤
对于不在一个句子中的实体属性值对，如果存在属性，则会通过指代消解来进行抽取，所以所有跨句的实体、属性值之间的属性都会被过滤掉。
例如：霹雳-15导弹弹体长度是4米，重25kg。可以射击到高度为1000米的目标。
这时通过跨句过滤，我们即可过滤掉（霹雳-15导弹，长度，1000米）这样的三元组。
事件抽取
事件抽取背景介绍
事件是发生在某个特定时间点或时间段、某个特定地域范围内，由一个或者多个角色参与的一个或者多个动作组成的事情或者状态的改变。事件抽取是是知识图谱构建和信息抽取任务中一个重要的子任务。
事件抽取的主要任务是从一段文本中检测出所发生的事件和事件里的相关元素。总结出来，我们要抽取的内容有如下四类：
事件触发词（Event Trigger）：事件描述中最能代表事件发生的词，是决定事件类别的重要特征，在ACE评测中事件触发词一般是动词或名词。
事件元素（Event Argument）：事件的参与者，是组成事件的核心部分，与事件触发词构成了事件的整个框架。事件元素主要由实体、时间和属性值等表达完整语义的细粒度单位组成。
元素角色（Argument Role）：事件元素与事件之间的语义关系，也就是事件元素在相应的事件中扮演什么角色。
事件类型（Event Type）：事件元素和触发词决定了事件的类别。
事件抽取数据规范
数据是人工智能算法研发的重要基础。事件抽取数据相关的规范主要包括事件元素定义和事件标注规范。以下为各部分的详细介绍。
事件元素定义
中文名	英文名	定义
触发词	trigger	主谓宾的谓词，是某一时刻发生的某一个动作;“台陆军的一台一架黑影直升机紧急迫降在台中市南屯区“ 触发词：迫降
事件主体	subject	事件的主语；“台陆军的一架黑影直升机紧急迫降在台中市南屯区“ 主体为：台陆军的一架黑影直升机
事件客体	object	事件的宾语；“台陆军的一台一架黑影直升机紧急迫降在台中市南屯区“ 客体为：台中市南屯区
时间	time	事件发生的时间
地点	loc	事件发生的地点,包括岛屿、国家、港口、海峡、水域、机场等。如果地点在主体或者客体里，则不作为地点
主体数量	subject_count	主体的个数
客体数量	object_count	客体的个数
描述	description	事件的概述
相关国家	country	涉及国家
相关武器	weapon	涉及武器装备

事件标注规范
标注举例
文本	错误事件抽取	备注
中国首艘055型导弹驱逐舰24日上午离开上海江南造船厂码头	主体：中国首艘055型导弹驱逐舰
谓词：离开
客体：上海江南造船厂码头
时间：24日上午	正确
055型驱逐舰首舰去年6月28日在上海江南造船厂下水	主体：055型驱逐舰首舰
谓词：下水
时间：去年6月28日	正确
印度空间研究组织（ISRO）从位于斯里赫里戈达岛的萨蒂什·达万航天中心发射了第42枚极地卫星运载火箭（PSLV）。	主体：印度空间研究组织（ISRO）
谓词：发射
客体：第42枚极地卫星运载火箭（PSLV）
时间：斯里赫里戈达岛	正确
美国法律禁止女兵参加直接的地面战斗，因此在步兵、装甲兵和炮兵部队中还没有出现女兵的身影。	主体：美国法律
谓词：禁止
客体：女兵参加直接的地面战斗	非突发事件
美国人不断强调的是，伊朗在试图发展核武器，威胁着世界安全。	主体：伊朗
谓词：发展
客体：核武器	未发生事件
穆恰伊泽认为，格鲁吉亚加入北约统一空管体系后，将能够和北约成员国一样，得到北约雷达实时数据	主体：格鲁吉亚
谓词：加入
客体：北约统一空管体系	未发生事件

事件抽取系统架构
事件抽取系统基于流水线架构，主要分为特征抽取、事件抽取、论元补充、事件过滤模块。事件抽取系统架构图如下所示：
 
事件抽取技术方案
模型抽取
事件抽取模型主要用于触发词预测，论元预测，事件属性预测，为多阶段模型。
事件由事件触发词( Trigger) 和描述事件结构的元素 (Argument) 构成。事件触发词标识着事件的发生。事件论元为事件主体(Subject)、客体(Object)、时间(Time)、地点(Location)等，是表达事件重要信息的载体。
特征抽取
特征抽取主要是指在进行事件抽取之前，需要使用一些NLP基础模块（分词、词性、实体和依存句法等）来获得文本的分词，词性，实体和句法的特征信息。
事件抽取模型
事件属性包括事件极性（Polarity）、时态(Tense)，是衡量事件是否真实发生的重要依据。通过极性，事件分为肯定、否定、可能事件。通过时态，事件分为过去发生的事件、现在正在发生的事件、将要发生的事件以及其他无法确定时态的事件。本系统主要识别非实际发生的事件，包括非肯定和将要发生事件。
模型主体为基于BERT的序列标注模型，其中，触发词预测模型为原始BERT序列标注模型；论元预测模型为基于触发词的Argument-Span预测模型，在原始原始BERT序列标注模型的基础上，将触发词位置作为Segment-Id，用于建模触发词和论元的依赖关系，其中由于主客体与其他论元存在重复，因此分批训练及预测；事件属性预测模型同论元预测模型。
BERT序列标注模型
BERT训练标注模型由嵌入层、编码层、输出层组成。嵌入层使用BERT嵌入，编码层使用BertEncoder，输出层为一个全连接层，最后可以添加CRF层，使用维特比解码进行标签序列约束，但为了提升训练与预测速度，本系统未使用CRF层，结果表明准确率效果接近，但预测速度提升50%。
优化器为类型为BertAdam，参数设置如下表所示。
学习率调整器为SlantedTriangular LR，参数设置如下表所示。
训练使用交叉熵损失函数。
 Argument-Span模型
Argument-Span模型基本结构与触发词BERT训练标注模型类似，由嵌入层、编码层、输出层组成。其中输入层修改了BERT的segment id，使用1表示触发词出现的位置，并对每个触发词，都进行一次论元预测。
 
图 Argument-Span模型
事件论元补充
事件论元补充主要作对模型识别论元结果的补充。特征抽取模块中做了时间与地点的实体识别。我们利用实体和句法的特征信息来补充事件的论元。
时间抽取
在句法结构中，事件的发生时间与触发词的句法关系都为介宾和状中关系，我们抽取与触发词相关的这些词，再结合实体识别中的时间实体，找到相匹配的作为事件的时间。
地点抽取
在句法结构中，事件的地点与触发词的句法关系都为介宾、动补和状中关系，我们抽取与触发词相关的这些词，再结合实体识别中的地点实体，找到相匹配的作为事件的地点。
主体数量和客体数量抽取
主客体数量我们使用正则来抽取主体和客体中的量词，把其当时当作主体数量或客体数量。
事件过滤
事件过滤用来过滤抽取出来的未发生事件，非军事事件和非突发事件。
关键词过滤
关键词过滤使用否定词汇和否定句式来过滤未发生事件。如：计划、将要、准备、没有、不会等词汇，如果...则...等句式未发生来过滤事件。
分类模型过滤
对于非军事事件和非突发事件，使用分类模型来过滤。通过输入事件的描述和触发词的特征信息，得到是否是非军事或非突发来过滤事件。



